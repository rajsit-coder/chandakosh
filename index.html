<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chandkosh ‚Äì Advanced Sanskrit Prosody Analyzer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700&family=Crimson+Text:wght@400;600;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
         :root {
            --font-heading: 'Crimson Text', serif;
            --font-body: 'Inter', sans-serif;
            --font-sanskrit: 'Noto Sans Devanagari', sans-serif;
            --radius: 16px;
            --radius-sm: 8px;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
            --shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.12);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        [data-theme="light"] {
            --bg-main: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-body: #fafbfc;
            --bg-card: #ffffff;
            --bg-card-hover: #f8f9fa;
            --text-primary: #1a1f36;
            --text-secondary: #4a5568;
            --text-muted: #718096;
            --border-color: #e2e8f0;
            --accent-primary: #667eea;
            --accent-secondary: #f6ad55;
            --accent-success: #48bb78;
            --accent-danger: #fc8181;
            --guru-color: #f56565;
            --laghu-color: #4299e1;
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-success: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }
        
        [data-theme="dark"] {
            --bg-main: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            --bg-body: #0f1419;
            --bg-card: #1a202c;
            --bg-card-hover: #2d3748;
            --text-primary: #f7fafc;
            --text-secondary: #cbd5e0;
            --text-muted: #718096;
            --border-color: #2d3748;
            --accent-primary: #9f7aea;
            --accent-secondary: #fbb6ce;
            --accent-success: #68d391;
            --accent-danger: #fc8181;
            --guru-color: #fc8181;
            --laghu-color: #63b3ed;
            --gradient-primary: linear-gradient(135deg, #9f7aea 0%, #d53f8c 100%);
            --gradient-secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-success: linear-gradient(135deg, #68d391 0%, #48bb78 100%);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }
        
        body {
            font-family: var(--font-body);
            line-height: 1.7;
            background-color: var(--bg-body);
            color: var(--text-primary);
            transition: var(--transition);
            -webkit-font-smoothing: antialiased;
            min-height: 100vh;
        }
        /* Sanskrit text styling */
        
        .sanskrit {
            font-family: var(--font-sanskrit);
            font-size: 1.1em;
            font-weight: 600;
            color: var(--accent-primary);
        }
        /* Logo styling */
        
        .logo-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        [data-theme="dark"] .logo-text {
            background: linear-gradient(135deg, #9f7aea 0%, #d53f8c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        /* Hero Header */
        
        .hero-header {
            background: var(--bg-main);
            padding: 4rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .hero-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.133 7-7s-3.134-7-7-7-7 3.133-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.133 7-7s-3.134-7-7-7-7 3.133-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            animation: float 20s ease-in-out infinite;
        }
        
        @keyframes float {
            0%,
            100% {
                transform: translateY(0) rotate(0deg);
            }
            33% {
                transform: translateY(-20px) rotate(1deg);
            }
            66% {
                transform: translateY(20px) rotate(-1deg);
            }
        }
        
        .container {
            max-width: 1320px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        .hero-content {
            position: relative;
            text-align: center;
            color: white;
        }
        
        .hero-title {
            font-family: var(--font-heading);
            font-size: clamp(3rem, 6vw, 5rem);
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: fadeInUp 0.8s ease;
            letter-spacing: -2px;
        }
        
        .hero-tagline {
            font-family: var(--font-sanskrit);
            font-size: 1.5rem;
            margin-bottom: 1rem;
            opacity: 0.95;
            animation: fadeInUp 0.8s ease 0.1s both;
        }
        
        .hero-subtitle {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto 2rem;
            animation: fadeInUp 0.8s ease 0.2s both;
        }
        
        .hero-om {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%,
            100% {
                transform: scale(1);
                opacity: 0.8;
            }
            50% {
                transform: scale(1.1);
                opacity: 1;
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Theme Switcher */
        
        .theme-switcher {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            z-index: 1000;
            background: var(--bg-card);
            border-radius: 50px;
            padding: 0.5rem;
            box-shadow: var(--shadow-lg);
            display: flex;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.9);
        }
        
        [data-theme="dark"] .theme-switcher {
            background: rgba(26, 32, 44, 0.9);
        }
        
        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 1.25rem;
        }
        
        .theme-btn.active {
            background: var(--gradient-primary);
            transform: scale(1.1);
        }
        /* Main Layout */
        
        .main-content {
            padding: 3rem 0;
        }
        
        .section {
            margin-bottom: 3rem;
        }
        
        .section-title {
            font-family: var(--font-heading);
            font-size: 2.5rem;
            color: var(--text-primary);
            margin-bottom: 2rem;
            position: relative;
            padding-bottom: 1rem;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: 2px;
        }
        /* Cards */
        
        .card {
            background-color: var(--bg-card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 2rem;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            background-color: var(--bg-card-hover);
        }
        
        .card-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .feature-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }
        
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
        }
        
        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        /* Info Tabs */
        
        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            color: var(--text-primary);
        }
        
        .tab-btn.active {
            background: var(--gradient-primary);
            color: white;
            border-color: transparent;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        /* Example Shlokas */
        
        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .example-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 1.5rem;
            border-left: 4px solid var(--accent-primary);
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }
        
        .example-card:hover {
            transform: translateX(8px);
            box-shadow: var(--shadow);
        }
        
        .example-title {
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 0.5rem;
        }
        
        .example-text {
            font-family: var(--font-sanskrit);
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .example-meter {
            font-size: 0.875rem;
            color: var(--text-muted);
            font-style: italic;
        }
        /* Gana Reference Table */
        
        .gana-table {
            width: 100%;
            background: var(--bg-card);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        
        .gana-table thead {
            background: var(--gradient-primary);
            color: white;
        }
        
        .gana-table th,
        .gana-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        .gana-table tbody tr:hover {
            background: var(--bg-card-hover);
        }
        
        .gana-pattern {
            font-family: monospace;
            font-size: 1.1rem;
            font-weight: 700;
            letter-spacing: 2px;
        }
        /* Form Styling */
        
        .analyzer-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 2.5rem;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }
        
        .input-mode-pills {
            display: flex;
            gap: 0.5rem;
            padding: 0.25rem;
            background: var(--bg-body);
            border-radius: var(--radius-sm);
            margin-bottom: 1.5rem;
        }
        
        .input-pill {
            flex: 1;
            padding: 0.75rem;
            background: transparent;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: var(--transition);
        }
        
        .input-pill.active {
            background: var(--bg-card);
            color: var(--accent-primary);
            box-shadow: var(--shadow-sm);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            font-family: var(--font-sanskrit);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            background-color: var(--bg-body);
            color: var(--text-primary);
            transition: var(--transition);
            resize: vertical;
        }
        
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        
        .form-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 700;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--bg-body);
            color: var(--text-primary);
            border: 2px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            background: var(--bg-card);
            border-color: var(--accent-primary);
            color: var(--accent-primary);
        }
        /* Results */
        
        .results-container {
            margin-top: 2rem;
        }
        
        .result-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            animation: slideIn 0.5s ease;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .syllable-display {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            font-size: 1.25rem;
            margin: 1.5rem 0;
        }
        
        .syllable {
            padding: 0.5rem 1rem;
            color: white;
            border-radius: var(--radius-sm);
            font-family: var(--font-sanskrit);
            font-weight: bold;
            min-width: 45px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            position: relative;
            transition: var(--transition);
        }
        
        .syllable:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        .syllable.laghu {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .syllable.guru {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .pattern-display {
            font-family: monospace;
            font-size: 1.5rem;
            letter-spacing: 4px;
            padding: 1rem;
            background: var(--bg-body);
            border-radius: var(--radius-sm);
            text-align: center;
            margin: 1rem 0;
            color: var(--accent-primary);
            font-weight: 700;
        }
        
        .match-card {
            border-left: 4px solid;
            padding: 1.5rem;
            border-radius: var(--radius-sm);
            background: var(--bg-body);
            margin-bottom: 1.5rem;
            transition: var(--transition);
        }
        
        .match-card:hover {
            transform: translateX(8px);
        }
        
        .match-card.exact {
            border-color: var(--accent-success);
            background: linear-gradient(90deg, rgba(72, 187, 120, 0.1) 0%, transparent 100%);
        }
        
        .match-card.fuzzy {
            border-color: var(--accent-secondary);
            background: linear-gradient(90deg, rgba(246, 173, 85, 0.1) 0%, transparent 100%);
        }
        
        .accuracy-meter {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .accuracy-bar {
            flex: 1;
            height: 8px;
            background-color: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .accuracy-bar-inner {
            height: 100%;
            background: var(--gradient-success);
            border-radius: 4px;
            transition: width 0.8s ease-out;
        }
        
        .accuracy-text {
            font-weight: 700;
            color: var(--accent-success);
            min-width: 50px;
        }
        /* Statistics */
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .stat-card {
            background: var(--gradient-primary);
            color: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            text-align: center;
            box-shadow: var(--shadow);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            font-size: 0.875rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        /* Loading Spinner */
        
        .spinner {
            width: 60px;
            height: 60px;
            margin: 3rem auto;
            border: 4px solid var(--border-color);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        /* Footer */
        
        .footer {
            background: var(--bg-card);
            padding: 3rem 0;
            margin-top: 5rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }
        
        .footer-brand {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .footer-content {
            color: var(--text-muted);
        }
        /* Utility Classes */
        
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mb-2 {
            margin-bottom: 2rem;
        }
        
        .mb-3 {
            margin-bottom: 3rem;
        }
        /* Responsive */
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            .hero-tagline {
                font-size: 1.25rem;
            }
            .section-title {
                font-size: 1.75rem;
            }
            .analyzer-card {
                padding: 1.5rem;
            }
            .feature-grid {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <!-- Theme Switcher -->
    <div class="theme-switcher">
        <button class="theme-btn active" id="light-btn" title="Light Mode">‚òÄÔ∏è</button>
        <button class="theme-btn" id="dark-btn" title="Dark Mode">üåô</button>
    </div>

    <!-- Hero Header -->
    <header class="hero-header">
        <div class="container hero-content">
            <div class="hero-om">üïâÔ∏è</div>
            <h1 class="hero-title">Chandkosh</h1>
            <p class="hero-tagline">‡§õ‡§®‡•ç‡§¶‡§ï‡•ã‡§∂ - The Treasury of Sanskrit Meters</p>
            <p class="hero-subtitle">Unveiling the Mathematical Beauty of Sanskrit Prosody Through Advanced Pattern Recognition</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Welcome Message -->
            <section class="section">
                <div class="card text-center" style="background: var(--gradient-primary); color: white;">
                    <h2 style="color: white; border: none;">Welcome to Chandkosh</h2>
                    <p style="font-size: 1.2rem; margin-bottom: 0;">Your comprehensive digital companion for exploring the ancient science of Sanskrit prosody. Chandkosh combines traditional wisdom with modern technology to analyze, identify, and teach the intricate patterns of Sanskrit meters.</p>
                </div>
            </section>

            <!-- Features Section -->
            <section class="section">
                <h2 class="section-title">Why Choose Chandkosh?</h2>
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üéØ</div>
                        <h3>Precision Analysis</h3>
                        <p>Advanced algorithms ensure precise syllable classification using traditional Sanskrit prosody rules</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîç</div>
                        <h3>Smart Matching</h3>
                        <p>Fuzzy pattern matching finds closest meters even with minor variations using sophisticated algorithms</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üìö</div>
                        <h3>Rich Database</h3>
                        <p>Comprehensive collection of 20+ classical meters from Pingala's Chanda·∏•≈õƒÅstra and beyond</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üåê</div>
                        <h3>Multi-Script Support</h3>
                        <p>Seamlessly works with both Devanagari script and IAST romanization</p>
                    </div>
                </div>
            </section>

            <!-- Educational Content -->
            <section class="section">
                <h2 class="section-title">Master Chandas Shastra</h2>

                <div class="tabs">
                    <button class="tab-btn active" data-tab="basics">Fundamentals</button>
                    <button class="tab-btn" data-tab="ganas">Ga·πáa System</button>
                    <button class="tab-btn" data-tab="rules">Classification Rules</button>
                    <button class="tab-btn" data-tab="examples">Classic Examples</button>
                </div>

                <div class="tab-content active" id="basics">
                    <div class="card">
                        <h3>Understanding Sanskrit Prosody with Chandkosh</h3>
                        <p>Sanskrit prosody (‡§õ‡§®‡•ç‡§¶‡§É‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞) is an ancient science that classifies poetic meters based on the mathematical arrangement of syllables. Chandkosh brings this ancient wisdom to your fingertips with modern technology.</p>
                        <ul style="margin: 1rem 0; padding-left: 2rem;">
                            <li><strong>Laghu (‡§≤‡§ò‡•Å - L):</strong> Light/short syllable - typically containing a short vowel</li>
                            <li><strong>Guru (‡§ó‡•Å‡§∞‡•Å - G):</strong> Heavy/long syllable - containing long vowels, diphthongs, or short vowels followed by conjunct consonants</li>
                        </ul>
                        <p>The genius of ƒÄcƒÅrya Pi·πÖgala's system, preserved in Chandkosh, lies in creating a binary classification system (2300 years ago!) where meters are defined by specific L-G patterns, making Sanskrit poetry both mathematical and melodious.</p>
                        <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-body); border-radius: var(--radius-sm);">
                            <p style="margin: 0;"><strong>Did you know?</strong> The word "Chandkosh" (‡§õ‡§®‡•ç‡§¶‡§ï‡•ã‡§∂) combines "Chanda" (meter) and "Kosh" (treasury), literally meaning "Treasury of Meters" - reflecting our mission to preserve and share this ancient knowledge.</p>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="ganas">
                    <div class="card">
                        <h3>The Eight Ga·πáas in Chandkosh</h3>
                        <p>Ga·πáas are three-syllable patterns that form the building blocks of meters. Chandkosh recognizes and analyzes these fundamental units. They are memorized using the mnemonic: <span class="sanskrit">‡§Ø‡§Æ‡§æ‡§§‡§æ‡§∞‡§æ‡§ú‡§≠‡§æ‡§®‡§∏‡§≤‡§ó‡§æ‡§É</span></p>
                        <table class="gana-table">
                            <thead>
                                <tr>
                                    <th>Ga·πáa</th>
                                    <th>Name</th>
                                    <th>Pattern</th>
                                    <th>Mnemonic</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="sanskrit">‡§Ø-‡§ó‡§£</td>
                                    <td>ya-ga·πáa</td>
                                    <td class="gana-pattern">LGG</td>
                                    <td class="sanskrit">‡§Ø‡§Æ‡§æ‡§§‡§æ</td>
                                </tr>
                                <tr>
                                    <td class="sanskrit">‡§Æ-‡§ó‡§£</td>
                                    <td>ma-ga·πáa</td>
                                    <td class="gana-pattern">GGG</td>
                                    <td class="sanskrit">‡§Æ‡§æ‡§§‡§æ‡§∞‡§æ</td>
                                </tr>
                                <tr>
                                    <td class="sanskrit">‡§§-‡§ó‡§£</td>
                                    <td>ta-ga·πáa</td>
                                    <td class="gana-pattern">GGL</td>
                                    <td class="sanskrit">‡§§‡§æ‡§∞‡§æ‡§ú</td>
                                </tr>
                                <tr>
                                    <td class="sanskrit">‡§∞-‡§ó‡§£</td>
                                    <td>ra-ga·πáa</td>
                                    <td class="gana-pattern">GLG</td>
                                    <td class="sanskrit">‡§∞‡§æ‡§ú‡§≠‡§æ</td>
                                </tr>
                                <tr>
                                    <td class="sanskrit">‡§ú-‡§ó‡§£</td>
                                    <td>ja-ga·πáa</td>
                                    <td class="gana-pattern">LGL</td>
                                    <td class="sanskrit">‡§ú‡§≠‡§æ‡§®</td>
                                </tr>
                                <tr>
                                    <td class="sanskrit">‡§≠-‡§ó‡§£</td>
                                    <td>bha-ga·πáa</td>
                                    <td class="gana-pattern">GLL</td>
                                    <td class="sanskrit">‡§≠‡§æ‡§®‡§∏</td>
                                </tr>
                                <tr>
                                    <td class="sanskrit">‡§®-‡§ó‡§£</td>
                                    <td>na-ga·πáa</td>
                                    <td class="gana-pattern">LLL</td>
                                    <td class="sanskrit">‡§®‡§∏‡§≤</td>
                                </tr>
                                <tr>
                                    <td class="sanskrit">‡§∏-‡§ó‡§£</td>
                                    <td>sa-ga·πáa</td>
                                    <td class="gana-pattern">LLG</td>
                                    <td class="sanskrit">‡§∏‡§≤‡§ó‡§æ‡§É</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-content" id="rules">
                    <div class="card">
                        <h3>Chandkosh Classification Algorithm</h3>
                        <h4>When does Chandkosh classify a syllable as Guru (Heavy)?</h4>
                        <ol style="margin: 1rem 0; padding-left: 2rem;">
                            <li>Contains a long vowel (‡§Ü, ‡§à, ‡§ä, ‡•†, ‡•°, ‡§è, ‡§ê, ‡§ì, ‡§î)</li>
                            <li>Contains a short vowel followed by anusvƒÅra (‡§Ç) or visarga (‡§É)</li>
                            <li>Contains a short vowel followed by a conjunct consonant</li>
                            <li>Is at the end of a pƒÅda (‡§™‡§æ‡§¶‡§æ‡§®‡•ç‡§§) - often considered long by position</li>
                        </ol>
                        <h4>When does Chandkosh classify a syllable as Laghu (Light)?</h4>
                        <ul style="margin: 1rem 0; padding-left: 2rem;">
                            <li>Contains a short vowel (‡§Ö, ‡§á, ‡§â, ‡§ã, ‡§å) not followed by conjunct consonants</li>
                            <li>Not at the end of a pƒÅda (unless specifically marked)</li>
                        </ul>
                        <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-body); border-radius: var(--radius-sm);">
                            <p style="margin: 0;"><strong>Chandkosh Tip:</strong> Our algorithm considers contextual rules and sandhi effects for maximum accuracy in syllable classification.</p>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="examples">
                    <div class="card">
                        <h3>Classic Verses in Chandkosh Database</h3>
                        <div class="example-grid">
                            <div class="example-card">
                                <div class="example-title">KƒÅlidƒÅsa's Invocation</div>
                                <div class="example-text">‡§µ‡§æ‡§ó‡§∞‡•ç‡§•‡§æ‡§µ‡§ø‡§µ ‡§∏‡§Ç‡§™‡•É‡§ï‡•ç‡§§‡•å ‡§µ‡§æ‡§ó‡§∞‡•ç‡§•‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§§‡•ç‡§§‡§Ø‡•á</div>
                                <div class="example-meter">Meter: Anu·π£·π≠ubh</div>
                            </div>
                            <div class="example-card">
                                <div class="example-title">Bhagavad Gƒ´tƒÅ 2.47</div>
                                <div class="example-text">‡§ï‡§∞‡•ç‡§Æ‡§£‡•ç‡§Ø‡•á‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞‡§∏‡•ç‡§§‡•á ‡§Æ‡§æ ‡§´‡§≤‡•á‡§∑‡•Å ‡§ï‡§¶‡§æ‡§ö‡§®</div>
                                <div class="example-meter">Meter: Anu·π£·π≠ubh</div>
                            </div>
                            <div class="example-card">
                                <div class="example-title">Meghad≈´ta Opening</div>
                                <div class="example-text">‡§ï‡§∂‡•ç‡§ö‡§ø‡§§‡•ç‡§ï‡§æ‡§®‡•ç‡§§‡§æ‡§µ‡§ø‡§∞‡§π‡§ó‡•Å‡§∞‡•Å‡§£‡§æ ‡§∏‡•ç‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§™‡•ç‡§∞‡§Æ‡§§‡•ç‡§§‡§É</div>
                                <div class="example-meter">Meter: MandƒÅkrƒÅntƒÅ</div>
                            </div>
                            <div class="example-card">
                                <div class="example-title">≈öi≈õupƒÅlavadha</div>
                                <div class="example-text">‡§∂‡•ç‡§∞‡§ø‡§Ø‡§É ‡§™‡§§‡§ø‡§É ‡§∂‡•ç‡§∞‡•Ä‡§Æ‡§§‡§ø ‡§∂‡§æ‡§∏‡§ø‡§§‡•Å‡§Ç ‡§ú‡§ó‡§§‡•ç</div>
                                <div class="example-meter">Meter: VasantatilakƒÅ</div>
                            </div>
                            <div class="example-card">
                                <div class="example-title">Nƒ´ti≈õataka</div>
                                <div class="example-text">‡§∏‡§§‡•ç‡§Ø‡§æ‡§®‡•ç‡§µ‡•á‡§∑‡•Ä ‡§ö ‡§µ‡§ø‡§¶‡•ç‡§µ‡§æ‡§®‡•ç ‡§π‡§ø‡§§‡§ï‡§∞ ‡§â‡§¶‡§æ‡§∞‡•ã</div>
                                <div class="example-meter">Meter: ≈öƒÅrd≈´lavikrƒ´·∏çita</div>
                            </div>
                            <div class="example-card">
                                <div class="example-title">KumƒÅrasambhava</div>
                                <div class="example-text">‡§Ö‡§∏‡•ç‡§§‡•ç‡§Ø‡•Å‡§§‡•ç‡§§‡§∞‡§∏‡•ç‡§Ø‡§æ‡§Ç ‡§¶‡§ø‡§∂‡§ø ‡§¶‡•á‡§µ‡§§‡§æ‡§§‡•ç‡§Æ‡§æ</div>
                                <div class="example-meter">Meter: ≈öloka (Anu·π£·π≠ubh)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Statistics -->
            <section class="section">
                <h2 class="section-title text-center">Chandkosh by Numbers</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">20+</div>
                        <div class="stat-label">Classical Meters</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">99%</div>
                        <div class="stat-label">Accuracy Rate</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">2</div>
                        <div class="stat-label">Script Types</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">‚àû</div>
                        <div class="stat-label">Verses to Explore</div>
                    </div>
                </div>
            </section>

            <!-- Analyzer Tool -->
            <section class="section">
                <h2 class="section-title">Analyze with Chandkosh</h2>

                <div class="analyzer-card">
                    <h3 style="margin-bottom: 1.5rem; color: var(--accent-primary);">üî¨ Chandkosh Meter Analyzer</h3>
                    <form id="chandas-form">
                        <div class="input-mode-pills">
                            <button type="button" class="input-pill active" data-mode="single">Single Line</button>
                            <button type="button" class="input-pill" data-mode="multi">Multiple Lines</button>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="shloka-input" id="input-label">
                                Enter a single line (PƒÅda) of a Shloka:
                            </label>
                            <textarea class="form-textarea" id="shloka-input" rows="4" placeholder="e.g., ‡§µ‡§æ‡§ó‡§∞‡•ç‡§•‡§æ‡§µ‡§ø‡§µ ‡§∏‡§Ç‡§™‡•É‡§ï‡•ç‡§§‡•å ‡§µ‡§æ‡§ó‡§∞‡•ç‡§•‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§§‡•ç‡§§‡§Ø‡•á" required></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="script-type">Select Input Script:</label>
                            <select class="form-select" id="script-type">
                                <option value="devanagari" selected>Devanagari (‡§¶‡•á‡§µ‡§®‡§æ‡§ó‡§∞‡•Ä)</option>
                                <option value="iast">IAST (Roman Transliteration)</option>
                            </select>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                <span>üîç</span> Analyze
                            </button>
                            <button type="button" id="clear-btn" class="btn btn-secondary">
                                <span>‚úñ</span> Clear
                            </button>
                        </div>
                    </form>
                </div>

                <div id="results-container" class="results-container hidden">
                    <div id="spinner" class="spinner"></div>
                    <div id="results-content"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container footer-content">
            <div class="footer-brand">
                <span class="logo-text">Chandkosh</span> <span class="sanskrit">‡§õ‡§®‡•ç‡§¶‡§ï‡•ã‡§∂</span>
            </div>
            <p>Your Digital Gateway to Sanskrit Prosody</p>
            <p>¬© 2025 Chandkosh</p>
            <p style="font-size: 0.875rem; margin-top: 1rem;">Built with ‚ù§Ô∏è for Sanskrit</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
                    // --- Theme Management ---
                    const root = document.documentElement;
                    const lightBtn = document.getElementById('light-btn');
                    const darkBtn = document.getElementById('dark-btn');

                    const setTheme = (theme) => {
                        root.setAttribute('data-theme', theme);
                        localStorage.setItem('chandkosh_theme', theme);

                        if (theme === 'dark') {
                            darkBtn.classList.add('active');
                            lightBtn.classList.remove('active');
                        } else {
                            lightBtn.classList.add('active');
                            darkBtn.classList.remove('active');
                        }
                    };

                    lightBtn.addEventListener('click', () => setTheme('light'));
                    darkBtn.addEventListener('click', () => setTheme('dark'));

                    const savedTheme = localStorage.getItem('chandkosh_theme') || 'light';
                    setTheme(savedTheme);

                    // --- Tabs Management ---
                    const tabBtns = document.querySelectorAll('.tab-btn');
                    const tabContents = document.querySelectorAll('.tab-content');

                    tabBtns.forEach(btn => {
                        btn.addEventListener('click', () => {
                            const tabId = btn.dataset.tab;

                            tabBtns.forEach(b => b.classList.remove('active'));
                            tabContents.forEach(c => c.classList.remove('active'));

                            btn.classList.add('active');
                            document.getElementById(tabId).classList.add('active');
                        });
                    });

                    // --- Input Mode Toggle ---
                    const inputPills = document.querySelectorAll('.input-pill');
                    const shlokaInput = document.getElementById('shloka-input');
                    const inputLabel = document.getElementById('input-label');

                    inputPills.forEach(pill => {
                        pill.addEventListener('click', () => {
                            inputPills.forEach(p => p.classList.remove('active'));
                            pill.classList.add('active');

                            const mode = pill.dataset.mode;
                            if (mode === 'multi') {
                                inputLabel.textContent = 'Enter multiple lines (PƒÅdas) of a Shloka (one per line):';
                                shlokaInput.placeholder = 'Enter each line on a new line:\n‡§µ‡§æ‡§ó‡§∞‡•ç‡§•‡§æ‡§µ‡§ø‡§µ ‡§∏‡§Ç‡§™‡•É‡§ï‡•ç‡§§‡•å ‡§µ‡§æ‡§ó‡§∞‡•ç‡§•‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§§‡•ç‡§§‡§Ø‡•á\n‡§ú‡§ó‡§§‡§É ‡§™‡§ø‡§§‡§∞‡•å ‡§µ‡§®‡•ç‡§¶‡•á ‡§™‡§æ‡§∞‡•ç‡§µ‡§§‡•Ä‡§™‡§∞‡§Æ‡•á‡§∂‡•ç‡§µ‡§∞‡•å';
                                shlokaInput.rows = 6;
                            } else {
                                inputLabel.textContent = 'Enter a single line (PƒÅda) of a Shloka:';
                                shlokaInput.placeholder = 'e.g., ‡§µ‡§æ‡§ó‡§∞‡•ç‡§•‡§æ‡§µ‡§ø‡§µ ‡§∏‡§Ç‡§™‡•É‡§ï‡•ç‡§§‡•å ‡§µ‡§æ‡§ó‡§∞‡•ç‡§•‡§™‡•ç‡§∞‡§§‡§ø‡§™‡§§‡•ç‡§§‡§Ø‡•á';
                                shlokaInput.rows = 4;
                            }
                        });
                    });

                    // --- Form & Analysis ---
                    const form = document.getElementById('chandas-form');
                    const scriptType = document.getElementById('script-type');
                    const clearBtn = document.getElementById('clear-btn');
                    const resultsContainer = document.getElementById('results-container');
                    const resultsContent = document.getElementById('results-content');
                    const spinner = document.getElementById('spinner');

                    // --- CHANDKOSH DATABASE ---
                    const chandasPatterns = {
                        'GƒÅyatrƒ´ (‡§ó‡§æ‡§Ø‡§§‡•ç‡§∞‡•Ä)': {
                            syllables: 8,
                            pattern: 'GGLLGLGL',
                            type: 'Vedic',
                            description: 'The most sacred Vedic meter with 24 syllables (8√ó3).'
                        },
                        'Anu·π£·π≠ubh (‡§Ö‡§®‡•Å‡§∑‡•ç‡§ü‡•Å‡§≠‡•ç)': {
                            syllables: 8,
                            pattern: null,
                            type: 'Meter Class',
                            description: 'Most common meter in epics, 8 syllables per pƒÅda, variable pattern.'
                        },
                        'IndravajrƒÅ (‡§á‡§®‡•ç‡§¶‡•ç‡§∞‡§µ‡§ú‡•ç‡§∞‡§æ)': {
                            syllables: 11,
                            pattern: 'GGLGGLGLGG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ta, ta, ja, ga, ga (‡§§‡§æ ‡§§‡§æ ‡§ú‡§æ ‡§ó‡•å).'
                        },
                        'UpendravajrƒÅ (‡§â‡§™‡•á‡§®‡•ç‡§¶‡•ç‡§∞‡§µ‡§ú‡•ç‡§∞‡§æ)': {
                            syllables: 11,
                            pattern: 'LGLGGLGLGG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ja, ta, ja, ga, ga (‡§ú‡§æ ‡§§‡§æ ‡§ú‡§æ ‡§ó‡•å).'
                        },
                        '≈öƒÅlinƒ´ (‡§∂‡§æ‡§≤‡§ø‡§®‡•Ä)': {
                            syllables: 11,
                            pattern: 'GGGGGLGGLGG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ma, ta, ta, ga, ga (‡§Æ‡§æ ‡§§‡•å ‡§ó‡•å).'
                        },
                        'RathoddhatƒÅ (‡§∞‡§•‡•ã‡§°‡•ç‡§¢‡§§‡§æ)': {
                            syllables: 11,
                            pattern: 'GLGLLLGLGLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ra, na, ra, la, ga (‡§∞‡§æ ‡§®‡§∞‡§æ‡§µ‡§ø‡§π ‡§∞‡§•‡•ã‡§¶‡•ç‡§ß‡§§‡§æ ‡§≤‡§ó‡•å).'
                        },
                        'Va·πÉ≈õastha (‡§µ‡§Ç‡§∂‡§∏‡•ç‡§•)': {
                            syllables: 12,
                            pattern: 'LGLGGLGLGLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ja, ta, ja, ra (‡§ú‡§§‡•å ‡§§‡•Å ‡§µ‡§Ç‡§∂‡§∏‡•ç‡§•‡§Æ‡•Å‡§¶‡•Ä‡§∞‡§ø‡§§‡§Ç ‡§ú‡§∞‡•å).'
                        },
                        'Drutavilambita (‡§¶‡•ç‡§∞‡•Å‡§§‡§µ‡§ø‡§≤‡§Æ‡•ç‡§¨‡§ø‡§§)': {
                            syllables: 12,
                            pattern: 'LLLGLLGLLGLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: na, bha, bha, ra (‡§¶‡•ç‡§∞‡•Å‡§§‡§µ‡§ø‡§≤‡§Æ‡•ç‡§¨‡§ø‡§§‡§Æ‡§æ‡§π ‡§®‡§≠‡•å ‡§≠‡§∞‡•å).'
                        },
                        'BhujangaprayƒÅta (‡§≠‡•Å‡§ú‡§ô‡•ç‡§ó‡§™‡•ç‡§∞‡§Ø‡§æ‡§§)': {
                            syllables: 12,
                            pattern: 'LGGLGGLGGLGG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ya, ya, ya, ya (‡§≠‡•Å‡§ú‡§ô‡•ç‡§ó‡§™‡•ç‡§∞‡§Ø‡§æ‡§§‡§Ç ‡§ö‡§§‡•Å‡§∞‡•ç‡§≠‡§ø‡§∞‡•ç‡§Ø‡§ï‡§æ‡§∞‡•à‡§É).'
                        },
                        'To·π≠aka (‡§§‡•ã‡§ü‡§ï)': {
                            syllables: 12,
                            pattern: 'LLGLLGLLGLLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: sa, sa, sa, sa (‡§µ‡§¶ ‡§§‡•ã‡§ü‡§ï‡§Æ‡§¨‡•ç‡§ß‡§ø‡§∏‡§ï‡§æ‡§∞‡§Ø‡•Å‡§§‡§Æ‡•ç).'
                        },
                        'VasantatilakƒÅ (‡§µ‡§∏‡§®‡•ç‡§§‡§§‡§ø‡§≤‡§ï‡§æ)': {
                            syllables: 14,
                            pattern: 'GGLGLLLGLLGLGG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ta, bha, ja, ja, ga, ga (‡§â‡§ï‡•ç‡§§‡§æ ‡§µ‡§∏‡§®‡•ç‡§§‡§§‡§ø‡§≤‡§ï‡§æ ‡§§‡§≠‡§ú‡§æ ‡§ú‡§ó‡•å ‡§ó‡§É).'
                        },
                        'MƒÅlinƒ´ (‡§Æ‡§æ‡§≤‡§ø‡§®‡•Ä)': {
                            syllables: 15,
                            pattern: 'LLLLLLGGGLGGLGG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: na, na, ma, ya, ya (‡§® ‡§® ‡§Æ ‡§Ø ‡§Ø ‡§Ø‡•Å‡§§‡•á‡§Ø‡§Ç ‡§Æ‡§æ‡§≤‡§ø‡§®‡•Ä ‡§≠‡•ã‡§ó‡§ø‡§≤‡•ã‡§ï‡•à‡§É).'
                        },
                        '≈öikhari·πáƒ´ (‡§∂‡§ø‡§ñ‡§∞‡§ø‡§£‡•Ä)': {
                            syllables: 17,
                            pattern: 'LGGGGGLLLLGLGLLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ya, ma, na, sa, bha, la, ga (‡§∞‡§∏‡•à ‡§∞‡•Å‡§¶‡•ç‡§∞‡•à‡§∂‡•ç‡§õ‡§ø‡§®‡•ç‡§®‡§æ ‡§Ø‡§Æ‡§®‡§∏‡§≠‡§≤‡§æ ‡§ó‡§É ‡§∂‡§ø‡§ñ‡§∞‡§ø‡§£‡•Ä).'
                        },
                        'MandƒÅkrƒÅntƒÅ (‡§Æ‡§®‡•ç‡§¶‡§æ‡§ï‡•ç‡§∞‡§æ‡§®‡•ç‡§§‡§æ)': {
                            syllables: 17,
                            pattern: 'GGGGLLLGLLGGLGGLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ma, bha, na, ta, ta, ga, ga (‡§Æ‡§®‡•ç‡§¶‡§æ‡§ï‡•ç‡§∞‡§æ‡§®‡•ç‡§§‡§æ ‡§ú‡§≤‡§ß‡§ø‡§∑‡§°‡§ó‡•à‡§∞‡•ç‡§Æ‡•ç‡§≠‡•å ‡§®‡§§‡•å ‡§§‡§æ‡§¶‡•ç‡§ó‡•Å‡§∞‡•Ç ‡§ö‡•á‡§§‡•ç).'
                        },
                        'P·πõthvƒ´ (‡§™‡•É‡§•‡•ç‡§µ‡•Ä)': {
                            syllables: 17,
                            pattern: 'LGLGLLGLLGLLGLGLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ja, sa, ja, sa, ya, la, ga (‡§ú‡§∏‡•å ‡§ú‡§∏‡§Ø‡§≤‡§æ ‡§µ‡§∏‡•Å‡§ó‡•ç‡§∞‡§π‡§Ø‡§§‡§ø‡§∂‡•ç‡§ö ‡§™‡•É‡§•‡•ç‡§µ‡•Ä ‡§ó‡•Å‡§∞‡•Å‡§É).'
                        },
                        'Hari·πáƒ´ (‡§π‡§∞‡§ø‡§£‡•Ä)': {
                            syllables: 17,
                            pattern: 'LLLLLGGGGGLGLGGLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: na, sa, ma, ra, sa, la, ga (‡§∞‡§∏‡§Ø‡•Å‡§ó‡§π‡§Ø‡•à‡§∞‡•ç‡§®‡•ç‡§∏‡•å ‡§Æ‡•ç‡§∞‡•å ‡§∏‡•ç‡§≤‡•å ‡§ó‡•ã ‡§Ø‡§¶‡§æ ‡§π‡§∞‡§ø‡§£‡•Ä ‡§§‡§¶‡§æ).'
                        },
                        '≈öƒÅrd≈´lavikrƒ´·∏çita (‡§∂‡§æ‡§∞‡•ç‡§¶‡•Ç‡§≤‡§µ‡§ø‡§ï‡•ç‡§∞‡•Ä‡§°‡§ø‡§§)': {
                            syllables: 19,
                            pattern: 'GGGLGLLLGGLGGGLGGLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ma, sa, ja, sa, ta, ta, ga (‡§∏‡•Ç‡§∞‡•ç‡§Ø‡§æ‡§∂‡•ç‡§µ‡•à‡§∞‡•ç‡§Æ‡§∏‡§ú‡§æ‡§∏‡•ç‡§§‡§§‡§æ‡§É ‡§∏‡§ó‡•Å‡§∞‡§µ‡§É ‡§∂‡§æ‡§∞‡•ç‡§¶‡•Ç‡§≤‡§µ‡§ø‡§ï‡•ç‡§∞‡•Ä‡§°‡§ø‡§§‡§Æ‡•ç).'
                        },
                        'SragdharƒÅ (‡§∏‡•ç‡§∞‡§ó‡•ç‡§ß‡§∞‡§æ)': {
                            syllables: 21,
                            pattern: 'GGGLGLGLLLLLLGGGLGGLG',
                            type: 'Sama-v·πõtta',
                            description: 'Ga·πáas: ma, ra, bha, na, ya, ya, ya (‡§Æ‡•ç‡§∞‡§≠‡•ç‡§®‡•à‡§∞‡•ç‡§Ø‡§æ‡§®‡§æ‡§Ç ‡§§‡•ç‡§∞‡§Ø‡•á‡§£ ‡§§‡•ç‡§∞‡§ø‡§Æ‡•Å‡§®‡§ø‡§Ø‡§§‡§ø‡§Ø‡•Å‡§§‡§æ ‡§∏‡•ç‡§∞‡§ó‡•ç‡§ß‡§∞‡§æ ‡§ï‡•Ä‡§∞‡•ç‡§§‡§ø‡§§‡•á‡§Ø‡§Æ‡•ç).'
                        },
                        'Tri·π£·π≠ubh Class': {
                            syllables: 11,
                            pattern: null,
                            type: 'Meter Class',
                            description: 'A major class of meters with 11 syllables per pƒÅda.'
                        },
                        'Jagatƒ´ Class': {
                            syllables: 12,
                            pattern: null,
                            type: 'Meter Class',
                            description: 'A major class of meters with 12 syllables per pƒÅda.'
                        }
                    };

                    form.addEventListener('submit', (e) => {
                        e.preventDefault();
                        const text = shlokaInput.value;
                        if (!text.trim()) {
                            renderError("Please enter a Shloka line to analyze with Chandkosh.");
                            return;
                        }

                        resultsContainer.classList.remove('hidden');
                        spinner.classList.remove('hidden');
                        resultsContent.innerHTML = '';

                        setTimeout(() => {
                            try {
                                const activeMode = document.querySelector('.input-pill.active').dataset.mode;

                                if (activeMode === 'single') {
                                    const syllables = tokenizeSyllables(text, scriptType.value);
                                    if (syllables.length === 0) throw new Error("Chandkosh could not parse syllables. Please check your input for errors.");

                                    const classified = classifySyllables(syllables, scriptType.value);
                                    const pattern = classified.map(s => s.type).join('');
                                    const matches = identifyChandasPattern(pattern);

                                    renderResults({
                                        syllables: classified,
                                        pattern: pattern,
                                        matches: matches
                                    });
                                } else {
                                    const lines = text.split('\n').filter(line => line.trim());
                                    if (lines.length === 0) throw new Error("No valid lines found for Chandkosh to analyze.");

                                    const allResults = [];
                                    for (let i = 0; i < lines.length; i++) {
                                        const line = lines[i].trim();
                                        if (line) {
                                            const syllables = tokenizeSyllables(line, scriptType.value);
                                            if (syllables.length > 0) {
                                                const classified = classifySyllables(syllables, scriptType.value);
                                                const pattern = classified.map(s => s.type).join('');
                                                const matches = identifyChandasPattern(pattern);

                                                allResults.push({
                                                    lineNumber: i + 1,
                                                    text: line,
                                                    syllables: classified,
                                                    pattern: pattern,
                                                    matches: matches
                                                });
                                            }
                                        }
                                    }

                                    if (allResults.length === 0) throw new Error("Chandkosh could not parse any valid lines.");
                                    renderMultipleResults(allResults);
                                }
                            } catch (error) {
                                renderError(error.message);
                            } finally {
                                spinner.classList.add('hidden');
                            }
                        }, 500);
                    });

                    clearBtn.addEventListener('click', () => {
                        form.reset();
                        resultsContainer.classList.add('hidden');
                        resultsContent.innerHTML = '';
                    });

                    function levenshteinDistance(a, b) {
                        if (a.length === 0) return b.length;
                        if (b.length === 0) return a.length;
                        const matrix = Array(a.length + 1).fill(null).map(() => Array(b.length + 1).fill(null));
                        for (let i = 0; i <= a.length; i++) matrix[i][0] = i;
                        for (let j = 0; j <= b.length; j++) matrix[0][j] = j;
                        for (let i = 1; i <= a.length; i++) {
                            for (let j = 1; j <= b.length; j++) {
                                const cost = a[i - 1] === b[j - 1] ? 0 : 1;
                                matrix[i][j] = Math.min(matrix[i - 1][j] + 1, matrix[i][j - 1] + 1, matrix[i - 1][j - 1] + cost);
                            }
                        }
                        return matrix[a.length][b.length];
                    }

                    function identifyChandasPattern(pattern) {
                        const matches = {
                            exact: [],
                            fuzzy: [],
                            possible: []
                        };
                        const len = pattern.length;
                        const mismatchTolerance = 3;

                        for (const name in chandasPatterns) {
                            const chandas = chandasPatterns[name];
                            if (chandas.pattern) {
                                const distance = levenshteinDistance(pattern, chandas.pattern);
                                if (distance === 0) {
                                    matches.exact.push({
                                        name,
                                        distance,
                                        ...chandas
                                    });
                                } else if (distance <= mismatchTolerance && len === chandas.syllables) {
                                    matches.fuzzy.push({
                                        name,
                                        distance,
                                        ...chandas
                                    });
                                }
                            } else if (chandas.syllables === len) {
                                matches.possible.push({
                                    name,
                                    ...chandas
                                });
                            }
                        }
                        matches.fuzzy.sort((a, b) => a.distance - b.distance);
                        return matches;
                    }

                    const tokenizeSyllables = (text, script) => {
                        const cleanedText = text.trim().replace(/[.,''"`;?!|]/g, '').replace(/\s+/g, ' ');
                        const regex = script === 'devanagari' ?
                            /(?:[\u0915-\u0939]\u094d)*[\u0915-\u0939][\u093e-\u094c\u0902\u0903]?|[\u0905-\u0914\u0960\u0961][\u0902\u0903]?/g :
                            /[kgh·πÖcj√±·π≠·∏ç·πátdnpbmyrlv≈õ·π£sh]*[aeiou·πõ·∏∑ƒÅƒ´≈´·πù·∏π]([·πÉ·∏•])?/gi;
                        return cleanedText.match(regex) || [];
                    };

                    const classifySyllables = (syllables, script) => {
                        const classified = [];
                        for (let i = 0; i < syllables.length; i++) {
                            let isGuru = false;
                            const longVowelRegex = script === 'devanagari' ? /[‡§Ü‡¶à‡§ä‡•†‡•°‡§è‡§ê‡§ì‡§î‡§æ‡•Ä‡•Ç‡•Ñ‡•£‡•á‡•à‡•ã‡•å]/ : /[ƒÅƒ´≈´·πù·∏πeaiou]/i;
                            const anunasikaRegex = script === 'devanagari' ? /[‡§Ç‡§É]/ : /[·πÉ·∏•]/i;
                            if (longVowelRegex.test(syllables[i])) isGuru = true;
                            if (anunasikaRegex.test(syllables[i])) isGuru = true;
                            if (!isGuru) {
                                const nextSyllable = syllables[i + 1] || '';
                                if (script === 'devanagari') {
                                    if (nextSyllable.includes('\u094d')) isGuru = true;
                                } else {
                                    const consonants = 'kgh·πÖcj√±·π≠·∏ç·πátdnpbmyrlv≈õ·π£sh';
                                    if (nextSyllable.length > 1 && consonants.includes(nextSyllable[0].toLowerCase()) && consonants.includes(nextSyllable[1].toLowerCase())) isGuru = true;
                                }
                            }
                            if (i === syllables.length - 1) isGuru = true;
                            classified.push({
                                syllable: syllables[i],
                                type: isGuru ? 'G' : 'L'
                            });
                        }
                        return classified;
                    };

                    function renderResults(data) {
                        const patternLength = data.pattern.length;
                        let html = `
                <div class="result-card">
                    <h3>üìä Chandkosh Analysis Results</h3>
                    <div class="syllable-display">
                        ${data.syllables.map(s => `<div class="syllable ${s.type === 'L' ? 'laghu' : 'guru'}" title="${s.type === 'L' ? 'Laghu (Light)' : 'Guru (Heavy)'}">${s.syllable}</div>`).join('')}
                    </div>
                    <div class="pattern-display">${data.pattern}</div>
                    <p style="text-align: center; color: var(--text-muted);">Total: ${patternLength} syllables identified by Chandkosh</p>
                </div>
                <div class="result-card">
                    <h3>üéØ Chandkosh Meter Identification</h3>`;

                if (data.matches.exact.length > 0) {
                    const match = data.matches.exact[0];
                    html += `
                        <div class="match-card exact">
                            <h4>‚úÖ Perfect Match Found by Chandkosh: ${match.name}</h4>
                            <p>${match.description}</p>
                            <div class="accuracy-meter">
                                <div class="accuracy-bar">
                                    <div class="accuracy-bar-inner" style="width: 100%"></div>
                                </div>
                                <span class="accuracy-text">100%</span>
                            </div>
                        </div>`;
                } else if (data.matches.fuzzy.length > 0) {
                    html += `<h4>üîç Chandkosh Found Closest Matches</h4>`;
                    data.matches.fuzzy.forEach(match => {
                        const accuracy = Math.round(((patternLength - match.distance) / patternLength) * 100);
                        html += `
                            <div class="match-card fuzzy">
                                <h4>${match.name}</h4>
                                <p>${match.description}</p>
                                <p style="color: var(--text-muted);">Mismatches: ${match.distance} syllable${match.distance > 1 ? 's' : ''}</p>
                                <div class="accuracy-meter">
                                    <div class="accuracy-bar">
                                        <div class="accuracy-bar-inner" style="width:${accuracy}%"></div>
                                    </div>
                                    <span class="accuracy-text">${accuracy}%</span>
                                </div>
                            </div>`;
                    });
                } else if (data.matches.possible.length > 0) {
                    const match = data.matches.possible[0];
                    html += `
                        <div class="match-card fuzzy">
                            <h4>üìö Chandkosh Suggests: ${match.name}</h4>
                            <p>This meter class has ${patternLength} syllables but no fixed pattern.</p>
                            <p>${match.description}</p>
                        </div>`;
                } else {
                    html += `<p style="text-align: center; color: var(--text-muted);">No known Chandas with ${patternLength} syllables found in Chandkosh database.</p>`;
                }

                html += `</div>`;
                resultsContent.innerHTML = html;
            }

            function renderMultipleResults(allResults) {
                let html = `<div class="result-card"><h3>üìù Chandkosh Analysis of Multiple Lines</h3>`;
                
                allResults.forEach(result => {
                    const patternLength = result.pattern.length;
                    html += `
                        <div style="border-left: 3px solid var(--accent-primary); padding-left: 1rem; margin-bottom: 2rem;">
                            <h4 style="color: var(--accent-primary); margin-bottom: 1rem;">Line ${result.lineNumber}</h4>
                            <div class="syllable-display">
                                ${result.syllables.map(s => `<div class="syllable ${s.type === 'L' ? 'laghu' : 'guru'}" title="${s.type === 'L' ? 'Laghu' : 'Guru'}">${s.syllable}</div>`).join('')}
                            </div>
                            <div class="pattern-display" style="font-size: 1rem; margin: 0.5rem 0;">${result.pattern}</div>`;
                    
                    if (result.matches.exact.length > 0) {
                        const match = result.matches.exact[0];
                        html += `<p><strong>‚úÖ Chandkosh Match:</strong> ${match.name}</p>`;
                    } else if (result.matches.fuzzy.length > 0) {
                        const match = result.matches.fuzzy[0];
                        const accuracy = Math.round(((patternLength - match.distance) / patternLength) * 100);
                        html += `<p><strong>üîç Chandkosh Closest:</strong> ${match.name} (${accuracy}% match)</p>`;
                    } else if (result.matches.possible.length > 0) {
                        const match = result.matches.possible[0];
                        html += `<p><strong>üìö Chandkosh Suggests:</strong> ${match.name}</p>`;
                    } else {
                        html += `<p style="color: var(--text-muted);">No meter found in Chandkosh database</p>`;
                    }
                    
                    html += `</div>`;
                });
                
                html += `</div>`;
                resultsContent.innerHTML = html;
            }

            function renderError(message) {
                resultsContainer.classList.remove('hidden');
                resultsContent.innerHTML = `
                    <div class="result-card" style="border-left: 4px solid var(--accent-danger); background: rgba(252, 129, 129, 0.1);">
                        <h3 style="color: var(--accent-danger);">‚ö†Ô∏è Chandkosh Error</h3>
                        <p>${message}</p>
                    </div>`;
            }
        });
    </script>
</body>

</html>